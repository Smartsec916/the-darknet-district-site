<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Blackout Protocol — Start</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    html,body{margin:0;background:#000;color:#cfd6df;font-family:monospace;height:100%;}
    .wrap{display:grid;place-items:center;height:100%;}
    .screen{position:relative;display:inline-block;}
    canvas{image-rendering:pixelated;width:min(960px,96vw);height:auto;border:2px solid #5c5c5c;background:#000;}
    .btn{
      position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
      padding:10px 18px;border:1px solid #5c5c5c;border-radius:4px;
      color:#9cff7e;text-decoration:none;background:rgba(0,0,0,.6)
    }
    .btn:hover{filter:brightness(1.2)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="screen">
      <canvas id="title" width="640" height="480"></canvas>
      <a class="btn" href="./level1.html">[ START ]</a>
    </div>
  </div>

  <script type="module">
    // Retro title + Top10 pulled from localStorage (no extra START drawn here)
    const c=document.getElementById('title'), ctx=c.getContext('2d');
    const VW=c.width, VH=c.height;

    function getLeaderboard(){
      try{ return JSON.parse(localStorage.getItem('leaderboard')||'[]') }catch(e){ return [] }
    }
    function drawCRT(){
      ctx.fillStyle='#000'; ctx.fillRect(0,0,VW,VH);
      ctx.strokeStyle='rgba(0,255,120,.12)';
      for(let y=0;y<VH;y+=2){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(VW,y); ctx.stroke() }
    }
    function drawTitle(){
      drawCRT();
      ctx.fillStyle='#b7ff44'; ctx.font='16px monospace';
      ctx.fillText('BLACKOUT PROTOCOL', 20, 40);

      ctx.fillStyle='#cfd6df'; ctx.font='12px monospace';
      ctx.fillText('TOP 10', 20, 70);

      const lb=getLeaderboard().slice(0,10);
      ctx.font='11px monospace';
      lb.forEach((row,i)=>{
        const tag=(row.tag||row.id||'RUN').toString().slice(0,10).padEnd(10,' ');
        const sc=(row.score||0).toString().padStart(6,' ');
        ctx.fillText(`${String(i+1).padStart(2,'0')}  ${tag}  ${sc}`, 20, 90+i*16);
      });
      // NOTE: removed the extra canvas-drawn “[ START ]” to avoid the duplicate
    }
    drawTitle();
  </script>
</body>
</html>
